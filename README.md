# 養父西町ごみ出しカレンダー

養父西町エリアの収集予定を確認できるPWA対応のシングルページアプリです。CSVから予定を読み込み、最新の情報をカレンダーとリストで表示します。

## アクセスURL
- 本番公開: デプロイしたホスティングのURL（例: GitHub Pages の場合 `https://<GitHubユーザー名>.github.io/site1/`）
- ローカル確認: 任意の静的サーバーで `index.html` を配信します（例: `npx serve .` または `python -m http.server 4173`）。

## CSVの編集方法
1. `data/schedule.csv` を開き、1行目のヘッダーはそのままにして各行を編集します。
2. 主な列の意味は以下のとおりです。
   - `id`: 予定を一意に識別するID。重複しない英数字を指定してください。
   - `name`: 画面に表示する名称。
   - `type`: `weekly`（毎週）または `monthly`（特定曜日の◯週目）。
   - `weekday` / `weekdays`: `weekly` の場合は `weekdays` に曜日番号（0=日曜〜6=土曜）をセミコロンやカンマ区切りで指定します。`monthly` の場合は `weekday` に曜日番号、`ordinals` に第何週かを数値で記述します。
   - `color`: カテゴリーの背景色（CSSカラー）。
   - `description`: 詳細説明。
3. 行頭に `#` で始まる `id` を記載すると、その行は無視されます。
4. 保存後にブラウザーをリロードすると変更が反映されます。ビルド工程は不要です。

## 公式PDFやURLの更新
- 公式の収集カレンダーPDFのパスは `data/schedule.js` 内の `officialPdfUrl` で管理しています。
- 出典URLなどを変更したい場合も同ファイルの定数を更新してください。

## スマホのホーム画面へ追加する
このアプリはPWAとして動作します。以下の手順でホーム画面に追加できます。
- **iOS (Safari)**: 画面下部の共有ボタン → 「ホーム画面に追加」。
- **Android (Chrome)**: 右上メニュー → 「ホーム画面に追加」。
追加すると、アプリのアイコンから全画面表示で素早くアクセスでき、オフラインでも最近のデータを参照できます。

## キャッシュの更新
CSVやデザインを更新した際に表示が変わらない場合は、ブラウザーのキャッシュを削除するか、設定画面で「サイトデータを消去」してください。PWAのキャッシュは数秒後に自動で新バージョンへ切り替わります。

## 開発メモ
- スタイルは `styles/main.css`、動的処理は `scripts/app.js` にまとまっています。
- サービスワーカーは `service-worker.js` で定義しており、主要なアセットをオフラインキャッシュします。
- 変更を反映させたら `git status` で差分を確認し、コミットしてください。
